
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Midnight Frost: The Golden Catch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Quicksand:wght@400;600;700&display=swap');

        body {
            margin: 0;
            overflow: hidden;
            background-color: #0f172a;
            font-family: 'Quicksand', sans-serif;
            touch-action: none; /* Prevent scrolling on mobile */
            user-select: none;
        }

        /* Glassmorphism UI */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .title-font {
            font-family: 'Cinzel', serif;
        }

        /* Animations */
        @keyframes pulse-gold {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 25px rgba(255, 215, 0, 0.8); }
        }

        .animate-gold-pulse {
            animation: pulse-gold 2s infinite;
        }

        #game-canvas {
            display: block;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none; /* Let clicks pass through to canvas when playing */
        }

        .interactive {
            pointer-events: auto;
        }

        .hud-text {
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }
    </style>
</head>
<body>

    <canvas id="game-canvas"></canvas>

    <!-- UI Overlay -->
    <div id="ui-layer" class="flex flex-col justify-between p-4">
        
        <!-- HUD (Hidden on Menu) -->
        <div id="hud" class="hidden w-full flex justify-between items-start">
            <div class="flex flex-col gap-2">
                <div class="glass-panel rounded-xl px-4 py-2 text-white">
                    <span class="text-xs text-blue-200 uppercase tracking-wider">Score</span>
                    <div class="text-2xl font-bold" id="score-display">0</div>
                </div>
                <div id="multiplier-display" class="hidden glass-panel rounded-xl px-4 py-1 text-yellow-300 border-yellow-500/30">
                    <span class="text-sm font-bold">x2 BONUS!</span>
                </div>
            </div>

            <div class="flex flex-col gap-2 items-end">
                <div class="glass-panel rounded-xl px-4 py-2 text-white min-w-[100px] text-center">
                    <span class="text-xs text-blue-200 uppercase tracking-wider">Time</span>
                    <div class="text-2xl font-bold" id="time-display">60</div>
                </div>
                <!-- Powerup Indicators -->
                <div id="active-powerups" class="flex flex-col gap-1 items-end"></div>
            </div>
            
            <button id="pause-btn" class="interactive glass-panel rounded-full p-3 text-white hover:bg-white/10 transition mt-2 absolute top-4 left-1/2 transform -translate-x-1/2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </button>
        </div>

potato, [11/28/2025 7:21 PM]
<!-- Main Menu -->
        <div id="start-screen" class="interactive absolute inset-0 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm z-50">
            <div class="glass-panel p-8 rounded-2xl max-w-md w-full text-center border-t-4 border-t-blue-400">
                <h1 class="title-font text-5xl text-transparent bg-clip-text bg-gradient-to-r from-blue-200 via-white to-blue-200 font-bold mb-2">Midnight Frost</h1>
                <h2 class="text-xl text-blue-300 mb-8 tracking-widest uppercase">The Golden Catch</h2>
                
                <div class="flex flex-col gap-4 mb-8">
                    <div class="flex items-center justify-between text-left bg-white/5 p-3 rounded-lg">
                        <span class="text-white">‚ùÑÔ∏è Regular Snow</span>
                        <span class="font-bold text-blue-300">+10 pts</span>
                    </div>
                    <div class="flex items-center justify-between text-left bg-white/5 p-3 rounded-lg border border-yellow-500/30">
                        <span class="text-yellow-300">‚ú® Golden Flake</span>
                        <span class="font-bold text-yellow-300">+50 & x2</span>
                    </div>
                    <div class="flex items-center justify-between text-left bg-white/5 p-3 rounded-lg border border-red-500/30">
                        <span class="text-red-300">üßä Ice Shard</span>
                        <span class="font-bold text-red-300">-20 pts</span>
                    </div>
                </div>

                <div class="text-sm text-blue-200 mb-6 italic">
                    Drag left/right to catch the snowflakes!
                </div>

                <button id="start-btn" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/30 transition transform hover:scale-105 animate-gold-pulse">
                    START CELEBRATION
                </button>
                
                <div class="mt-4 text-xs text-slate-400">High Score: <span id="high-score">0</span></div>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="game-over-screen" class="interactive hidden absolute inset-0 flex items-center justify-center bg-slate-900/90 backdrop-blur-md z-50">
            <div class="glass-panel p-8 rounded-2xl max-w-md w-full text-center">
                <h2 class="title-font text-4xl text-white mb-2">Happy New Year!</h2>
                <div class="text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-600 mb-4" id="final-score">0</div>
                <p class="text-blue-200 mb-8">What a spectacular collection!</p>
                
                <button id="restart-btn" class="w-full bg-white text-blue-900 font-bold py-3 rounded-xl hover:bg-blue-50 transition shadow-lg">
                    Play Again
                </button>
            </div>
        </div>

    </div>

    <script>
        /**
         * AUDIO SYSTEM (Web Audio API)
         * Synthesizes sounds to avoid external asset dependencies.
         */
        class SoundManager {
            constructor() {
                this.ctx = null;
                this.muted = false;
            }

            init() {
                if (!this.ctx) {
                    this.ctx = new (window.AudioContext || window.webkitAudioContext)();
                }
            }

            playTone(type, frequency, duration, volume = 0.1, slideTo = null) {
                if (this.muted || !this.ctx) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                
                osc.type = type;
                osc.frequency.setValueAtTime(frequency, this.ctx.currentTime);
                
                if (slideTo) {
                    osc.frequency.exponentialRampToValueAtTime(slideTo, this.ctx.currentTime + duration);
                }

potato, [11/28/2025 7:21 PM]
gain.gain.setValueAtTime(volume, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + duration);

                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.start();
                osc.stop(this.ctx.currentTime + duration);
            }

            playCollect() { this.playTone('sine', 800, 0.1, 0.1); }
            playGold() { 
                this.playTone('sine', 1200, 0.4, 0.1); 
                setTimeout(() => this.playTone('triangle', 1800, 0.4, 0.1), 100);
            }
            playIce() { this.playTone('sawtooth', 150, 0.3, 0.1, 50); }
            playPowerUp() { 
                this.playTone('sine', 400, 0.6, 0.1, 1200); 
            }
            playFanfare() {
                const now = this.ctx.currentTime;
                [440, 554, 659, 880].forEach((freq, i) => {
                    setTimeout(() => this.playTone('square', freq, 0.4, 0.1), i * 150);
                });
            }
        }

        /**
         * GAME CONSTANTS & STATE
         */
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const sound = new SoundManager();
        
        // UI Elements
        const ui = {
            start: document.getElementById('start-screen'),
            gameOver: document.getElementById('game-over-screen'),
            hud: document.getElementById('hud'),
            score: document.getElementById('score-display'),
            timer: document.getElementById('time-display'),
            finalScore: document.getElementById('final-score'),
            highScore: document.getElementById('high-score'),
            multiplier: document.getElementById('multiplier-display'),
            activePowerups: document.getElementById('active-powerups'),
            startBtn: document.getElementById('start-btn'),
            restartBtn: document.getElementById('restart-btn'),
            pauseBtn: document.getElementById('pause-btn')
        };

        let gameState = 'MENU'; // MENU, PLAYING, PAUSED, GAMEOVER
        let width, height;
        let lastTime = 0;
        let animationFrame;

        // Game State Variables
        let score = 0;
        let timeLeft = 60;
        let scoreMultiplier = 1;
        let multiplierTimer = 0;
        let gameTime = 0; // Total time played this session
        let spawnRate = 60; // Frames between spawns
        let difficultyLevel = 1;
        
        // Entities
        let player;
        let snowflakes = [];
        let particles = []; // For fireworks and sparkles
        let powerups = [];
        
        // Active Effects
        let effects = {
            freeze: 0, // Time remaining
            magnet: 0,
            shield: 0
        };

        // Assets (Procedural Drawing Helpers)
        const colors = {
            snow: '#ffffff',
            gold: '#ffd700',
            ice: '#a5f3fc',
            magnet: '#c084fc', // purple
            shield: '#4ade80', // green
            freeze: '#38bdf8'  // blue
        };

        /**
         * RESIZE HANDLING
         */
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            if(player) player.y = height - 100;
        }
        window.addEventListener('resize', resize);
        resize();

        // High Score Load
        const storedHigh = localStorage.getItem('midnightFrostHighScore');
        if(storedHigh) ui.highScore.innerText = storedHigh;

        /**
         * CLASSES
         */

        class Player {
            constructor() {
                this.width = 80;
                this.height = 60;
                this.x = width / 2;
                this.y = height - 100;
                this.targetX = width / 2;
                this.color = '#fbbf24'; // Amber-400
            }

potato, [11/28/2025 7:21 PM]
update(dt) {
                // Smooth movement (Lerp)
                this.x += (this.targetX - this.x) * 0.15;
                
                // Bounds
                if (this.x < this.width/2) this.x = this.width/2;
                if (this.x > width - this.width/2) this.x = width - this.width/2;

                // Create trail particles
                if (Math.random() < 0.3) {
                    particles.push(new Particle(this.x + (Math.random() * 40 - 20), this.y + 10, colors.gold, 2));
                }
            }

            draw(ctx) {
                ctx.save();
                ctx.translate(this.x, this.y);

                // Shield Effect
                if (effects.shield > 0) {
                    ctx.beginPath();
                    ctx.arc(0, 0, 50, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(74, 222, 128, 0.2)';
                    ctx.strokeStyle = colors.shield;
                    ctx.lineWidth = 2;
                    ctx.fill();
                    ctx.stroke();
                }

                // The Net Ring
                ctx.beginPath();
                ctx.ellipse(0, 0, 40, 15, 0, 0, Math.PI * 2);
                ctx.lineWidth = 4;
                ctx.strokeStyle = colors.gold;
                ctx.shadowColor = colors.gold;
                ctx.shadowBlur = 10;
                ctx.stroke();

                // The Net Mesh (Simple curves)
                ctx.beginPath();
                ctx.moveTo(-40, 0);
                ctx.quadraticCurveTo(0, 50, 40, 0);
                ctx.strokeStyle = 'rgba(255,255,255,0.5)';
                ctx.lineWidth = 1;
                ctx.shadowBlur = 0;
                ctx.stroke();
                
                // Handle/Rod
                ctx.beginPath();
                ctx.moveTo(35, 5);
                ctx.lineTo(50, 60);
                ctx.lineWidth = 3;
                ctx.strokeStyle = '#92400e'; // Brown
                ctx.stroke();

                ctx.restore();
            }
        }

        class Snowflake {
            constructor() {
                this.type = this.determineType();
                this.x = Math.random() * (width - 20) + 10;
                this.y = -20;
                this.size = Math.random() * 5 + 3; // 3 to 8
                
                // Difficulty Scaling
                let baseSpeed = (100 + (difficultyLevel * 20));
                if (this.type === 'ice') baseSpeed *= 1.5;
                
                this.speed = Math.random() * 50 + baseSpeed; 
                this.swaySpeed = Math.random() * 2 + 1;
                this.swayOffset = Math.random() * Math.PI * 2;
                
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() - 0.5) * 2;
                
                this.active = true;
            }

            determineType() {
                const rand = Math.random();
                // Difficulty increases Ice chance
                const iceChance = 0.05 + (difficultyLevel * 0.02);
                
                if (rand < 0.02) return 'powerup_magnet';
                if (rand < 0.03) return 'powerup_freeze';
                if (rand < 0.04) return 'powerup_shield';
                if (rand < 0.04 + iceChance) return 'ice';
                if (rand < 0.10) return 'gold';
                return 'regular';
            }

            update(dt) {
                let currentSpeed = this.speed;
                if (effects.freeze > 0) currentSpeed *= 0.3;

                this.y += currentSpeed * dt;
                this.x += Math.sin(gameTime * this.swaySpeed + this.swayOffset) * 50 * dt;
                this.rotation += this.rotationSpeed * dt;

                // Magnet Effect
                if (effects.magnet > 0 && this.type !== 'ice' && this.y > 0) {

potato, [11/28/2025 7:21 PM]
const dx = player.x - this.x;
                    const dy = player.y - this.y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    if (dist < 300) {
                        this.x += (dx / dist) * 400 * dt;
                        this.y += (dy / dist) * 400 * dt;
                    }
                }

                if (this.y > height + 20) this.active = false;
            }

            draw(ctx) {
                if (!this.active) return;
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);

                if (this.type === 'regular') {
                    this.drawShape(ctx, colors.snow, 6, false);
                } else if (this.type === 'gold') {
                    this.drawShape(ctx, colors.gold, 6, true);
                } else if (this.type === 'ice') {
                    this.drawShard(ctx);
                } else if (this.type.startsWith('powerup')) {
                    this.drawPowerUp(ctx);
                }

                ctx.restore();
            }

            drawShape(ctx, color, points, glow) {
                ctx.beginPath();
                for(let i=0; i<points * 2; i++) {
                    const radius = i % 2 === 0 ? this.size : this.size / 2;
                    const angle = (i * Math.PI) / points;
                    ctx.lineTo(Math.cos(angle) * radius, Math.sin(angle) * radius);
                }
                ctx.closePath();
                ctx.fillStyle = color;
                
                if (glow) {
                    ctx.shadowColor = color;
                    ctx.shadowBlur = 15;
                }
                ctx.fill();
                ctx.shadowBlur = 0;
            }

            drawShard(ctx) {
                ctx.beginPath();
                ctx.moveTo(0, -this.size * 1.5);
                ctx.lineTo(this.size, 0);
                ctx.lineTo(0, this.size * 1.5);
                ctx.lineTo(-this.size, 0);
                ctx.fillStyle = colors.ice;
                ctx.shadowColor = colors.ice;
                ctx.shadowBlur = 5;
                ctx.fill();
                ctx.shadowBlur = 0;
            }

            drawPowerUp(ctx) {
                ctx.beginPath();
                ctx.arc(0, 0, this.size * 1.5, 0, Math.PI*2);
                let color = '#fff';
                let symbol = '';
                
                if(this.type === 'powerup_magnet') { color = colors.magnet; symbol = 'U'; }
                if(this.type === 'powerup_freeze') { color = colors.freeze; symbol = '‚ùÑ'; }
                if(this.type === 'powerup_shield') { color = colors.shield; symbol = 'üõ°'; }

                ctx.fillStyle = color;
                ctx.shadowColor = color;
                ctx.shadowBlur = 10;
                ctx.fill();
                ctx.shadowBlur = 0;
                
                // Inner symbol
                ctx.fillStyle = 'white';
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(symbol, 0, 0);
            }
        }

        class Particle {
            constructor(x, y, color, speed) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.size = Math.random() * 3 + 1;
                const angle = Math.random() * Math.PI * 2;
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                this.life = 1.0;
                this.decay = Math.random() * 0.02 + 0.01;
            }

            update(dt) {
                this.x += this.vx;
                this.y += this.vy;
                this.life -= this.decay;
                this.vy += 0.05; // Gravity
            }

potato, [11/28/2025 7:21 PM]
draw(ctx) {
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                ctx.fill();
                ctx.globalAlpha = 1.0;
            }
        }

        class Firework {
            constructor() {
                this.x = Math.random() * width;
                this
